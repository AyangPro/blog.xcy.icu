import{_ as s,W as a,X as e,Y as n,Z as i,a0 as l}from"./framework-91490e6a.js";const d={},r=i("p",null,"Linux中重装MySQL步骤",-1),c=l(`<h1 id="linux下的mysql重装教程" tabindex="-1"><a class="header-anchor" href="#linux下的mysql重装教程" aria-hidden="true">#</a> Linux下的MySQL重装教程</h1><p>在安装Linux下安装MySQL后，有时候可能因为一些配置原因，导致不得不重装数据库（比如，MySQL8.0后不支持更改一些配置，像不区分大小写之类的，我们只能在MySQL初始化的时候就要指定配置，不然将来需要更改时，可能就需要重装了），但是我们知道重装MySQL数据库可是个麻烦事，整不好安装一直失败...</p><p>因此，总结了一下卸载重装的步骤，按照一定步骤走，可以少一些错误。</p><h2 id="一、卸载mysql" tabindex="-1"><a class="header-anchor" href="#一、卸载mysql" aria-hidden="true">#</a> 一、卸载MySQL</h2><h3 id="_1、首先查看是否安装了mysql" tabindex="-1"><a class="header-anchor" href="#_1、首先查看是否安装了mysql" aria-hidden="true">#</a> 1、首先查看是否安装了MySQL</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 查看是否安装了的mysql</span>
<span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-i</span> mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-、关闭mysql服务" tabindex="-1"><a class="header-anchor" href="#_2-、关闭mysql服务" aria-hidden="true">#</a> 2.、关闭MySQL服务</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 查看MySQL状态</span>
<span class="token function">service</span> mysql status
<span class="token comment"># 通过yum安装的mysql也可通过以下命令查看</span>
systemctl status mysqld
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 关闭MySQL服务</span>
<span class="token function">service</span> mysql stop
<span class="token comment"># 通过yum安装的mysql也可通过以下命令关闭服务</span>
systemctl stop mysqld
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、卸载mysql服务" tabindex="-1"><a class="header-anchor" href="#_3、卸载mysql服务" aria-hidden="true">#</a> 3、卸载MySQL服务</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">rpm</span> <span class="token parameter variable">-ev</span> mysql-community-common-5.6.44-2.el7.x86_64
<span class="token function">rpm</span> <span class="token parameter variable">-ev</span> mysql-community-release-el7-5.noarch
<span class="token function">rpm</span> <span class="token parameter variable">-ev</span> mysql-community-client-5.6.44-2.el7.x86_64
<span class="token function">rpm</span> <span class="token parameter variable">-ev</span> mysql-community-server-5.6.44-2.el7.x86_64
<span class="token function">rpm</span> <span class="token parameter variable">-ev</span> mysql-community-libs-5.6.44-2.el7.x86_64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4、查看系统中mysql的文件夹" tabindex="-1"><a class="header-anchor" href="#_4、查看系统中mysql的文件夹" aria-hidden="true">#</a> 4、查看系统中MySQL的文件夹</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 查找出所有的MySQL文件夹</span>
<span class="token function">find</span> / <span class="token parameter variable">-name</span> mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5、查看mysql是否删除完成" tabindex="-1"><a class="header-anchor" href="#_5、查看mysql是否删除完成" aria-hidden="true">#</a> 5、查看MySQL是否删除完成</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 查看所有的mysql安装包</span>
<span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-i</span> mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>如果没有结果显示，说明删除完成。</p><h2 id="二、安装mysql" tabindex="-1"><a class="header-anchor" href="#二、安装mysql" aria-hidden="true">#</a> 二、安装MySQL</h2><p>1、查看yum中的mysql安装源</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 查看yum的mysql安装源</span>
yum list mysql* 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>如果没有找到mysql-service的安装包，则可以通过去官网下载yum源的npm文件</p><figure><img src="https://xcy-fcblog-1304336794.cos.ap-nanjing.myqcloud.com/posts/linux/MySQL-下载yum.png" alt="MySQL下载yum源" tabindex="0" loading="lazy"><figcaption>MySQL下载yum源</figcaption></figure><figure><img src="https://xcy-fcblog-1304336794.cos.ap-nanjing.myqcloud.com/posts/linux/MySQL-Linux版本.png" alt="MySQL-Linux版本" tabindex="0" loading="lazy"><figcaption>MySQL-Linux版本</figcaption></figure><p>可以根据自己的Linux的版本下载对应的包</p><figure><img src="https://xcy-fcblog-1304336794.cos.ap-nanjing.myqcloud.com/posts/linux/MySQL-Linux链接.png" alt="MySQL-Linux链接" tabindex="0" loading="lazy"><figcaption>MySQL-Linux链接</figcaption></figure><p>复制当前下载的链接。</p><p>这里也可以选择下载，然后上传到Linux中。</p><h3 id="_1、下载mysql安装源" tabindex="-1"><a class="header-anchor" href="#_1、下载mysql安装源" aria-hidden="true">#</a> 1、下载mysql安装源</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 下载mysql安装源</span>
<span class="token function">wget</span> <span class="token punctuation">[</span>下载的链接地址<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、安装mysql" tabindex="-1"><a class="header-anchor" href="#_2、安装mysql" aria-hidden="true">#</a> 2、安装mysql</h3><p>首先是安装mysql源</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 安装mysql源</span>
yum <span class="token function">install</span> mysql mysql80-community-release-el7-7.noarch.rpm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>安装好之后可以查看当前的mysql源</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum repolist enabled <span class="token operator">|</span> <span class="token function">grep</span> mysql.*
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://xcy-fcblog-1304336794.cos.ap-nanjing.myqcloud.com/posts/linux/查看Linux下MySQL安装.png" alt="Linux下MySQL安装源状态" tabindex="0" loading="lazy"><figcaption>Linux下MySQL安装源状态</figcaption></figure><p>接下来就是安装mysql了</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code> yum <span class="token parameter variable">-y</span> <span class="token function">install</span> mysql-community-server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>等待安装完成...</p><p>安装完成后先不要着急启动，因为mysql8.0之后，配置初始化完成后，就不能随便更改了，就好比大小写配置，初始化后再配置文件中修改后，mysql就启动不起来。</p><h2 id="三、初始化mysql" tabindex="-1"><a class="header-anchor" href="#三、初始化mysql" aria-hidden="true">#</a> 三、初始化MySQL</h2><p>首先，先修改配置文件，将配置修改成自己想要的。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 查看mysql的配置文件</span>
<span class="token function">vim</span> /etc/my.cnf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>修改配置文件之后，保存关闭my.cnf，然后启动mysql服务</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 启动mysql服务</span>
systemctl start mysqld.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>查看MySQL的默认密码</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 在mysql的日志文件中查看默认密码</span>
<span class="token function">grep</span> <span class="token string">&quot;password&quot;</span> /var/log/mysqld.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>得到密码后，启动mysql</p><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code># 进入mysql后，修改密码
alter user &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;[密码]&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="四、设置远程登录" tabindex="-1"><a class="header-anchor" href="#四、设置远程登录" aria-hidden="true">#</a> 四、设置远程登录</h4><p>在进行开发时候，如果每次都使用命令行操作多少有点麻烦，所以我们可以通过一些可视的数据库管理工具来连接我们的在远程安装的mysql数据库。</p><p>首先应当设置mysql可以远程连接，mysql默认情况下只能localhost可以访问。</p><p>我们可以在mysql的命令行完成</p><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code># 查看当前可连接的地址
use user;
select user, host from user;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>默认情况下user的host是localhost，我们需要将其设置为%，%标识任意地址都可以访问，当然我们也可以设置为指定地址才可以访问。</p><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code># 设置任意地址都可以访问
update user set host = ‘%’ where user = &#39;root&#39;;

# 再次查看可以访问的地址
select user, host from user;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://xcy-fcblog-1304336794.cos.ap-nanjing.myqcloud.com/posts/linux/查看MySQL远程连接状态.png" alt="查看MySQL远程连接状态" tabindex="0" loading="lazy"><figcaption>查看MySQL远程连接状态</figcaption></figure><p>之后就可以进行远程连接了。</p>`,56);function m(t,o){return a(),e("div",null,[r,n(" more "),c])}const u=s(d,[["render",m],["__file","Linux下的MySQL重装教程.html.vue"]]);export{u as default};
